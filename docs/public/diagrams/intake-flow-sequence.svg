<svg xmlns="http://www.w3.org/2000/svg" width="1500" height="1500" viewBox="0 0 1500 1500" role="img" aria-labelledby="title desc">
  <title id="title">End-to-End Intake Flow</title>
  <desc id="desc">Pictorial sequence from upload to final result with repair, correction, and human review decisions.</desc>

  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#f6f9ff"/>
      <stop offset="100%" stop-color="#eef7f1"/>
    </linearGradient>
    <linearGradient id="card" x1="0" y1="0" x2="1" y2="1">
      <stop offset="0%" stop-color="#ffffff"/>
      <stop offset="100%" stop-color="#f8fbff"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="160%">
      <feDropShadow dx="0" dy="5" stdDeviation="8" flood-color="#0f172a" flood-opacity="0.16"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#334155"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="10" refX="9" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="#0f5cad"/>
    </marker>
  </defs>

  <rect x="0" y="0" width="1500" height="1500" fill="url(#bg)"/>

  <text x="48" y="56" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="36" font-weight="700" fill="#0f172a">End-to-End Flow (Pictorial)</text>
  <text x="48" y="86" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="17" fill="#334155">Upload to workflow completion, including repair/correction branches and human review loop.</text>

  <g filter="url(#shadow)">
    <rect x="90" y="120" width="500" height="70" rx="16" fill="url(#card)" stroke="#60a5fa" stroke-width="2"/>
    <text x="120" y="163" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">1. Upload document via API</text>

    <rect x="90" y="220" width="500" height="70" rx="16" fill="url(#card)" stroke="#60a5fa" stroke-width="2"/>
    <text x="120" y="263" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">2. API writes object to MinIO</text>

    <rect x="90" y="320" width="500" height="70" rx="16" fill="url(#card)" stroke="#34d399" stroke-width="2"/>
    <text x="120" y="363" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">3. MinIO emits ObjectCreated event</text>

    <rect x="90" y="420" width="500" height="70" rx="16" fill="url(#card)" stroke="#818cf8" stroke-width="2"/>
    <text x="120" y="463" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">4. event-handler starts Temporal workflow</text>

    <rect x="90" y="520" width="500" height="70" rx="16" fill="url(#card)" stroke="#6366f1" stroke-width="2"/>
    <text x="120" y="563" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">5. Workflow runs in worker</text>

    <rect x="90" y="620" width="500" height="70" rx="16" fill="url(#card)" stroke="#3b82f6" stroke-width="2"/>
    <text x="120" y="663" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">6. Store + classify (non-LLM)</text>

    <rect x="90" y="720" width="500" height="70" rx="16" fill="url(#card)" stroke="#8b5cf6" stroke-width="2"/>
    <text x="120" y="763" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">7. Phase A: extract (AI/LLM)</text>

    <rect x="90" y="900" width="500" height="70" rx="16" fill="url(#card)" stroke="#0ea5e9" stroke-width="2"/>
    <text x="120" y="943" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">8. Validate rules + confidence</text>

    <rect x="90" y="1260" width="500" height="70" rx="16" fill="url(#card)" stroke="#0f766e" stroke-width="2"/>
    <text x="120" y="1303" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">12. Final result persisted</text>
  </g>

  <g filter="url(#shadow)">
    <polygon points="760,780 890,850 760,920 630,850" fill="#ffffff" stroke="#334155" stroke-width="2"/>
    <text x="702" y="855" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="18" font-weight="700" fill="#0f172a">Broken JSON?</text>

    <rect x="980" y="815" width="410" height="70" rx="16" fill="url(#card)" stroke="#f59e0b" stroke-width="2"/>
    <text x="1010" y="858" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">9. Phase B: repair JSON (AI/LLM)</text>

    <polygon points="760,960 890,1030 760,1100 630,1030" fill="#ffffff" stroke="#334155" stroke-width="2"/>
    <text x="684" y="1035" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="18" font-weight="700" fill="#0f172a">Need correction?</text>

    <rect x="980" y="995" width="410" height="70" rx="16" fill="url(#card)" stroke="#f97316" stroke-width="2"/>
    <text x="1010" y="1038" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">10. Phase C: correct values (AI/LLM)</text>

    <polygon points="760,1140 890,1210 760,1280 630,1210" fill="#ffffff" stroke="#334155" stroke-width="2"/>
    <text x="705" y="1215" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="18" font-weight="700" fill="#0f172a">Still risky?</text>

    <rect x="980" y="1175" width="410" height="70" rx="16" fill="url(#card)" stroke="#ef4444" stroke-width="2"/>
    <text x="1010" y="1218" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="19" font-weight="700" fill="#0f172a">11. Human review loop</text>
  </g>

  <path d="M340 190 L340 220" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <path d="M340 290 L340 320" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <path d="M340 390 L340 420" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <path d="M340 490 L340 520" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <path d="M340 590 L340 620" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>
  <path d="M340 690 L340 720" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>

  <path d="M590 755 L630 850" stroke="#334155" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <path d="M760 920 L760 960" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>

  <path d="M890 850 L980 850" stroke="#0f5cad" stroke-width="3" marker-end="url(#arrowBlue)"/>
  <text x="914" y="832" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">yes</text>
  <path d="M1390 850 C1440 850, 1440 935, 590 935" stroke="#0f5cad" stroke-width="3" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="1410" y="875" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">to validate</text>

  <path d="M760 1030 L760 1060" stroke="#334155" stroke-width="3" marker-end="url(#arrow)"/>

  <path d="M890 1030 L980 1030" stroke="#0f5cad" stroke-width="3" marker-end="url(#arrowBlue)"/>
  <text x="914" y="1012" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">yes</text>
  <path d="M1390 1030 C1440 1030, 1440 1210, 890 1210" stroke="#0f5cad" stroke-width="3" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="1410" y="1054" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">check risk</text>

  <path d="M890 1210 L980 1210" stroke="#0f5cad" stroke-width="3" marker-end="url(#arrowBlue)"/>
  <text x="914" y="1192" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">yes</text>
  <path d="M1390 1210 C1440 1210, 1440 1295, 590 1295" stroke="#0f5cad" stroke-width="3" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="1410" y="1234" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#0f5cad">review done</text>

  <path d="M760 850 C620 850, 620 935, 590 935" stroke="#334155" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="622" y="870" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#334155">no</text>

  <path d="M760 1030 C620 1030, 620 1295, 590 1295" stroke="#334155" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="622" y="1052" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#334155">no</text>

  <path d="M760 1210 C620 1210, 620 1295, 590 1295" stroke="#334155" stroke-width="3" fill="none" marker-end="url(#arrow)"/>
  <text x="622" y="1232" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="14" fill="#334155">no</text>

  <rect x="48" y="1400" width="1404" height="56" rx="12" fill="#ffffff" stroke="#cbd5e1"/>
  <text x="74" y="1435" font-family="IBM Plex Sans, Segoe UI, Arial, sans-serif" font-size="15" fill="#334155">Solid arrows: main/control flow | Blue arrows: branch paths (repair/correction/review)</text>
</svg>
